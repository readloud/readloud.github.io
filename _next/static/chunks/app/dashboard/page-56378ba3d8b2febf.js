(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{883:(e,t,s)=>{"use strict";s.d(t,{J:()=>r});let r="https://api.receiptflex.cc"},2120:(e,t,s)=>{Promise.resolve().then(s.bind(s,6755))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},6755:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),a=s(2115),i=s(7168),l=s(8482),n=s(5312),c=s(3999);let d=a.forwardRef((e,t)=>{let{className:s,value:a,indicatorClassName:i,...l}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,r.jsx)(n.C1,{className:(0,c.cn)("h-full w-full flex-1 bg-primary transition-all",i),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});d.displayName=n.bL.displayName;var o=s(7503),x=s(883),m=s(5695),h=s(9074),u=s(5868),f=s(7580),p=s(3861),b=s(4186),j=s(9397),v=s(5196),g=s(4416),N=s(2355),y=s(3052);function w(){let{user:e,loading:t}=(0,o.J)(),s=(0,m.useRouter)(),[n,c]=(0,a.useState)(65),[w,k]=(0,a.useState)({months:0,days:0,hours:0,minutes:0,seconds:0}),[C,A]=(0,a.useState)([]),[M,S]=(0,a.useState)(!0),[R,B]=(0,a.useState)(1);(0,a.useEffect)(()=>{if((null==e?void 0:e.expires)&&"none"!==e.expires&&""!==e.expires&&(null==e?void 0:e.starttimestamp)&&""!==e.starttimestamp){let t=()=>{let t=Number.parseInt(e.starttimestamp),s=Number.parseInt(e.expires),r=Date.now(),a=s-t,i=s-r;if(i>0&&a>0){let e=Math.floor(i/2592e6),s=Math.floor(i%2592e6/864e5),l=Math.floor(i%864e5/36e5);k({months:e,days:s,hours:l,minutes:Math.floor(i%36e5/6e4),seconds:Math.floor(i%6e4/1e3)}),c(Math.min(100,Math.max(0,(r-t)/a*100)))}};t();let s=setInterval(t,1e3);return()=>clearInterval(s)}},[e]),(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=await fetch("".concat(x.J,"/logs/updates"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();200===s.c&&s.updates&&A(s.updates)}catch(e){console.error("Error fetching updates:",e)}finally{S(!1)}})()},[]);let D=e=>{let t=Math.floor((Date.now()-(e>0x2540be3ff?e:1e3*e))/1e3);return t<60?"".concat(t," seconds ago"):t<3600?"".concat(Math.floor(t/60)," minutes ago"):t<86400?"".concat(Math.floor(t/3600)," hours ago"):t<2592e3?"".concat(Math.floor(t/86400)," days ago"):t<31536e3?"".concat(Math.floor(t/2592e3)," months ago"):"".concat(Math.floor(t/31536e3)," years ago")},T=e&&e.recentactivity?e.recentactivity.map((e,t)=>({...e,originalIndex:t})).sort((e,t)=>{var s,r,a,i;let l=(null===(s=e.view)||void 0===s?void 0:s.timestamp)||(null===(r=e.receipt)||void 0===r?void 0:r.timestamp)||0,n=(null===(a=t.view)||void 0===a?void 0:a.timestamp)||(null===(i=t.receipt)||void 0===i?void 0:i.timestamp)||0,c="string"==typeof l?new Date(l).getTime():1e3*l;return("string"==typeof n?new Date(n).getTime():1e3*n)-c}).slice(0,50):[],_=5*R,Z=T.slice(_-5,_),I=Math.ceil(T.length/5),L=e.refferalCode&&""!==e.refferalCode;return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Overview"}),(0,r.jsxs)("p",{className:"text-gray-400 mt-2",children:["Welcome ",e.username,"!"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(l.Zp,{className:"bg-black/40 backdrop-blur-xl border border-white/10 text-white hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"License Status"}),(0,r.jsx)(l.BT,{className:"text-gray-400",children:"none"===e.expires?"Lifetime License":""===e.expires?"No Active License":"Active License"})]}),(0,r.jsx)(h.A,{className:"h-5 w-5 text-[#12883e]"})]}),(0,r.jsx)(l.Wu,{children:e.expires&&""!==e.expires&&"none"!==e.expires?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d,{value:n,className:"h-2 bg-white/20",indicatorClassName:"bg-gradient-to-r from-[#16a24a] to-[#12883e]"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 text-center",children:[w.months>0&&(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-2 border border-white/5",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w.months}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:1===w.months?"Month":"Months"})]}),(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-2 border border-white/5",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w.days}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:1===w.days?"Day":"Days"})]}),(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-2 border border-white/5",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w.hours}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:1===w.hours?"Hour":"Hours"})]}),(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-2 border border-white/5",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w.minutes}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:1===w.minutes?"Minute":"Minutes"})]}),(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-2 border border-white/5",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w.seconds}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:1===w.seconds?"Second":"Seconds"})]})]})]}):"none"===e.expires?(0,r.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-[#12883e]",children:"Lifetime Access"})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,r.jsx)("span",{className:"text-xl text-gray-400",children:"No active license"})})})]}),(0,r.jsxs)(l.Zp,{className:"bg-black/40 backdrop-blur-xl border border-white/10 text-white hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"Total Credits"}),(0,r.jsx)(l.BT,{className:"text-gray-400",children:"Available for use"})]}),(0,r.jsx)(u.A,{className:"h-5 w-5 text-[#12883e]"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-24",children:(0,r.jsx)("span",{className:"text-4xl font-bold bg-gradient-to-r from-[#16a24a] to-[#12883e] bg-clip-text text-transparent",children:e.credits})})})]}),(0,r.jsxs)(l.Zp,{className:"bg-black/40 backdrop-blur-xl border border-white/10 text-white hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"Referral Program"}),(0,r.jsx)(l.BT,{className:"text-gray-400",children:"Invite new users"})]}),(0,r.jsx)(f.A,{className:"h-5 w-5 text-[#12883e]"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Share your referral link:"}),(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-md p-3 border border-white/10 text-sm truncate",children:["https://receiptflex.cc/refferal?code=",e.refferalCode]})]}):(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:"Set up your custom referral code to start earning rewards"}),(0,r.jsx)(i.$,{variant:"outline",size:"sm",className:"border-[#12883e] bg-gradient-to-r from-[#16a24a] to-[#12883e] text-white hover:opacity-90 transition-opacity",onClick:()=>{s.push("/dashboard/referral")},children:"Click here to set referral code"})]})})})]})]}),(0,r.jsxs)(l.Zp,{className:"bg-black/40 backdrop-blur-xl border border-white/10 text-white mb-6 hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"Updates"}),(0,r.jsx)(l.BT,{className:"text-gray-400",children:"Latest news and changes"})]}),(0,r.jsx)(p.A,{className:"h-5 w-5 text-[#12883e]"})]}),(0,r.jsx)(l.Wu,{children:M?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-[#16a24a] border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"})}):C.length>0?(0,r.jsx)("div",{className:"space-y-4",children:C.map((e,t)=>(0,r.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm rounded-lg p-4 border border-white/10 hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h3",{className:"font-medium text-white",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,r.jsx)(b.A,{className:"h-3 w-3 mr-1"}),new Date(Number.parseInt(e.date)).toLocaleDateString()]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:e.description})]},e._id||t))}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-400",children:(0,r.jsx)("p",{children:"No updates available"})})})]}),(0,r.jsxs)(l.Zp,{className:"bg-black/40 backdrop-blur-xl border border-white/10 text-white mb-6 hover:border-[#16a24a]/50 transition-all duration-300",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"Recent Activity"}),(0,r.jsx)(l.BT,{className:"text-gray-400",children:"Your recent views and receipt generations"})]}),(0,r.jsx)(j.A,{className:"h-5 w-5 text-[#12883e]"})]}),(0,r.jsx)(l.Wu,{children:T.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,r.jsxs)("table",{className:"w-full min-w-[600px]",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/10",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Type"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Details"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Count"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Time"})]})}),(0,r.jsx)("tbody",{children:Z.map((e,t)=>{let s=!!e.view,a=s?e.view:e.receipt;return(0,r.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("div",{className:"flex items-center",children:s?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"text-white-400",children:"View Bot"})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"text-white-400",children:"Receipt"})})})}),(0,r.jsx)("td",{className:"py-3 px-4",children:s?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium capitalize",children:a.service}),(0,r.jsx)("div",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:a.link})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:a.brand||"Unknown"}),(0,r.jsx)("div",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:a.email||"Unknown"})]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:s?(0,r.jsxs)("span",{className:"text-sm",children:[a.successcount,"/",a.count]}):(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:a.success?(0,r.jsxs)("span",{className:"flex items-center text-green-400",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-1"})," Success"]}):(0,r.jsxs)("span",{className:"flex items-center text-red-400",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-1"})," Failed"]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:a.timestamp?D("string"==typeof a.timestamp?new Date(a.timestamp).getTime()/1e3:a.timestamp):"Unknown"})]},t)})})]})}),I>1&&(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>B(e=>Math.max(e-1,1)),disabled:1===R,className:"border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-1"})," Previous"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:["Page ",R," of ",I]}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>B(e=>Math.min(e+1,I)),disabled:R===I,className:"border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:["Next ",(0,r.jsx)(y.A,{className:"h-4 w-4 ml-1"})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(j.A,{className:"mx-auto h-12 w-12 text-gray-500 opacity-20 mb-2"}),(0,r.jsx)("p",{className:"text-gray-400",children:"No recent activity"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Start generating receipts or viewing items to see activity here"})]})})]})]})}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155),a=s(2115),i=s(9708),l=s(2085),n=s(3999);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...o}=e,x=d?i.DX:"button";return(0,r.jsx)(x,{className:(0,n.cn)(c({variant:a,size:l,className:s})),ref:t,...o})});d.displayName="Button"},7503:(e,t,s)=>{"use strict";s.d(t,{J:()=>c,UserProvider:()=>n});var r=s(5155),a=s(2115),i=s(883);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[o,x]=(0,a.useState)(null),m=async()=>{try{let e=localStorage.getItem("token");if(!e){d(!1);return}let t=await fetch("".concat(i.J,"/user/@me"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();200===s.c&&s.u?n(s.u):(x(s.m||"Failed to fetch user data"),localStorage.removeItem("token"))}catch(e){console.error("[DEBUG] Issue with fetching information about the user:",e),x("An error occurred while fetching user data")}finally{d(!1)}},h=async()=>{d(!0),await m()};return(0,a.useEffect)(()=>{m()},[]),(0,r.jsx)(l.Provider,{value:{user:s,loading:c,error:o,refreshUser:h},children:t})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n,wL:()=>x});var r=s(5155),a=s(2115),i=s(3999);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});x.displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,3575,8441,1684,7358],()=>t(2120)),_N_E=e.O()}]);